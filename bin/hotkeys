#!/bin/bash

chip=0

while [ : ]
do
    BTN1=$(gpioget -c $chip --numeric 4)$(gpioget -c $chip --numeric 17)
    sleep 0.5
    BTN2=$(gpioget -c $chip --numeric 4)$(gpioget -c $chip --numeric 17)

    if [ $BTN1 != $BTN2 ]; then continue; fi

    if [ $BTN1 = "10" ]; then
       rec &
    fi
    if [ $BTN1 = "01" ]; then
        pkill -SIGTERM jack_capture;
    fi
    # if [ $BTN1 = "11" ]; then sudo poweroff; fi

    sleep 0.5
done
